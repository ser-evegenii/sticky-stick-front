"use strict";

var _interopRequireDefault = require("@babel/runtime-corejs2/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = openFile;

var _path = _interopRequireDefault(require("path"));

var _opn = _interopRequireDefault(require("opn"));

function openFile(_ref) {
  var app = _ref.app,
      cosmosConfig = _ref.cosmosConfig;
  app.get('/_open', function (req, res) {
    var relPath = req.query.filePath;

    if (typeof relPath !== 'string') {
      throw new Error("Invalid path: ".concat(String(relPath)));
    }

    var absPath = _path.default.join(cosmosConfig.rootPath, relPath);

    (0, _opn.default)(absPath);
    res.send();
  });
}